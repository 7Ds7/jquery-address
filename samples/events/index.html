<!DOCTYPE html>
<html>
    <head>
        <title>jQuery Address Events</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <link type="text/css" href="styles.css" rel="stylesheet">
        <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="jquery.address-1.2.min.js"></script>
        <script type="text/javascript">

            // Simple log
            var log = function(msg) {
                if (!$('.log').length) {
                    $('<div class="log"></div>').appendTo('.content');
                }
                $('.log').append(msg.replace(/^([^:]*):(.*)$/, '<p><b>$1:</b> <span class="$1">$2</span></p>'))
                    .attr({scrollTop: $('.log').attr('scrollHeight')})
                    .find('p:nth-child(even)').addClass('even');
            }
            
            // Event handlers
            $.address.init(function(event) {
                log('init: ' + event.value);
            }).change(function(event) {
                log('change: ' + event.value);
                var text = (event.value == '/') ? 'Home' : 
                    event.pathNames[0].substr(0, 1).toUpperCase() + 
                    event.pathNames[0].substr(1);
                $('a').each(function() {
                    $(this).toggleClass('selected', $(this).text() == text);
                });
            }).internalChange(function(event) {
                log('internalChange: ' + event.value);
            }).externalChange(function(event) {
                log('externalChange: ' + event.value);
            });
            
        </script>
    </head>
    <body>
        <div class="content">
            <h1>jQuery Address Events</h1>
            <ul class="nav">
                <li>
                    <a href="/jquery/address/samples/events/" rel="address:/">Home</a>
                </li>
                <li>
                    <a href="/jquery/address/samples/events/about" rel="address:/about">About</a>
                </li>
                <li>
                    <a href="/jquery/address/samples/events/portfolio" rel="address:/portfolio">Portfolio</a>
                </li>
                <li>
                    <a href="/jquery/address/samples/events/contact" rel="address:/contact">Contact</a>
                </li>
            </ul>
        </div>
    </body>
</html>